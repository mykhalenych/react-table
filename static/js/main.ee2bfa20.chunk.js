(this["webpackJsonpreact-table"]=this["webpackJsonpreact-table"]||[]).push([[0],{71:function(e,t,a){e.exports=a(82)},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(47),l=a.n(r),o=a(29),u=a(70),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(n.useState)(t),c=Object(o.a)(a,2),r=c[0],l=c[1],i=Object(n.useMemo)((function(){var t=Object(u.a)(e);return null!==r&&t.sort((function(e,t){return e[r.key]<t[r.key]?"ascending"===r.direction?-1:1:e[r.key]>t[r.key]?"ascending"===r.direction?1:-1:0})),t}),[e,r]),m=function(e){var t="ascending";r&&r.key===e&&"ascending"===r.direction&&(t="descending"),l({key:e,direction:t})};return{items:i,requestSort:m,sortConfig:r}},m=a(14),s=a(6),d=a(16),b=a(22),p="https://5eca820038df9600165117b6.mockapi.io/mock",E=function(e){return e.products.productsList},f=function(){return function(e){fetch(p).then((function(e){if(e.ok)return e.json()})).then((function(t){return e(function(e){return{type:"PRODUCTS_LIST_RECIVED",payload:{productsList:e}}}(t))}))}},h=function(e){var t=e.children;return c.a.createElement("div",{className:"error"},t)},y={name:"",qty:"",price:""},N=d.b({name:d.c().required("Required"),price:d.a().required("Required"),qty:d.a().required("Required")}),O={editProduct:function(e,t){return function(a){var n=Object(m.a)({},t);(function(e,t){return fetch("".concat(p,"/").concat(e),{method:"PUT",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Failed to update product")}))})(e,n).then((function(){return a(f())}))}}},v=Object(b.b)(null,O)((function(e){var t=e.closeModal,a=e.product,r=e.editProduct;console.log(a.id);var l=Object(n.useCallback)((function(e){var n=Object(m.a)({},e);r(a.id,n),t()}),[]);return c.a.createElement("div",{className:"modal-product"},c.a.createElement("button",{className:"modal-product__close",onClick:t},"X"),c.a.createElement("div",{className:"block"},c.a.createElement(s.d,{initialValues:y,onSubmit:l,validationSchema:N},c.a.createElement(s.c,{className:"block__form"},c.a.createElement("div",{className:"block__product-info"},c.a.createElement("div",{className:"block__description"},c.a.createElement("label",{className:"label",htmlFor:"name"},"Name"),c.a.createElement(s.b,{name:"name",type:"text",id:"name",className:"modal-input input"}),c.a.createElement(s.a,{name:"name",component:h}),c.a.createElement("label",{className:"label",htmlFor:"name"},"Price"),c.a.createElement(s.b,{name:"price",type:"number",className:"modal-input input"}),c.a.createElement(s.a,{name:"price",component:h}),c.a.createElement("label",{className:"label",htmlFor:"name"},"Quantity"),c.a.createElement(s.b,{name:"qty",type:"number",className:"modal-input input"}),c.a.createElement(s.a,{name:"qty",component:h}))),c.a.createElement("button",{className:"btn-submit btn",type:"submit"},"Submit")))))})),k=function(e){var t=e.products,a=e.removeProducts,r=Object(n.useState)(!1),l=Object(o.a)(r,2),u=l[0],m=l[1],s=Object(n.useState)({}),d=Object(o.a)(s,2),b=d[0],p=d[1],E=function(){m(!1)},f=i(t),h=f.items,y=f.requestSort,N=t.reduce((function(e,t){return e+t.price}),0),O=t.reduce((function(e,t){return e+t.qty}),0);return c.a.createElement("table",null,c.a.createElement("thead",{className:"thead"},c.a.createElement("th",{className:"thead-th"},c.a.createElement("span",{onClick:function(){return y("name")}},"Name")),c.a.createElement("th",{className:"thead-th"},c.a.createElement("span",{onClick:function(){return y("price")}},"Price")),c.a.createElement("th",{className:"thead-th"},c.a.createElement("span",{onClick:function(){return y("quantity")}},"Quantity")),c.a.createElement("th",{className:"thead-th"})),c.a.createElement("tbody",null,h.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.name),c.a.createElement("td",null,"$",e.price),c.a.createElement("td",null,e.qty),c.a.createElement("td",{className:"center"},c.a.createElement("button",{onClick:function(){return function(e){p(e),m(!0)}(e)}},"Edit"),u&&c.a.createElement(v,{closeModal:E,product:b}),c.a.createElement("button",{onClick:function(){return a(e.id)}},"Delete")))}))),c.a.createElement("tfoot",null,c.a.createElement("td",null,"-"),c.a.createElement("td",null,"$".concat(N)),c.a.createElement("td",null,O),c.a.createElement("td",null)))},j={name:"",qty:"",price:""},_=d.b({name:d.c().required("Required"),price:d.a().required("Required"),qty:d.a().required("Required")}),q={addProduct:function(e){return function(t){(function(e){return fetch(p,{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Failed to create product")}))})(Object(m.a)({},e)).then((function(){return t(f())}))}}},S=Object(b.b)(null,q)((function(e){var t=e.closeModal,a=e.addProduct,r=Object(n.useCallback)((function(e){var n=Math.random().toString(),c=Object(m.a)(Object(m.a)({},e),{},{id:n});a(c),t()}),[]);return c.a.createElement("div",{className:"modal-product"},c.a.createElement("button",{className:"modal-product__close",onClick:t},"X"),c.a.createElement("div",{className:"block"},c.a.createElement(s.d,{initialValues:j,onSubmit:r,validationSchema:_},c.a.createElement(s.c,{className:"block__form"},c.a.createElement("div",{className:"block__product-info"},c.a.createElement("div",{className:"block__description"},c.a.createElement("label",{className:"label",htmlFor:"name"},"Name"),c.a.createElement(s.b,{name:"name",type:"text",id:"name",className:"modal-input input"}),c.a.createElement(s.a,{name:"name",component:h}),c.a.createElement("label",{className:"label",htmlFor:"name"},"Price"),c.a.createElement(s.b,{name:"price",type:"number",className:"modal-input input"}),c.a.createElement(s.a,{name:"price",component:h}),c.a.createElement("label",{className:"label",htmlFor:"name"},"Quantity"),c.a.createElement(s.b,{name:"qty",type:"number",className:"modal-input input"}),c.a.createElement(s.a,{name:"qty",component:h}))),c.a.createElement("button",{className:"btn-submit btn",type:"submit"},"Submit")))))})),C={getProductsList:f,removeProduct:function(e){return function(t){var a;(a=e,fetch("".concat(p,"/").concat(a),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Failed to delete product")}))).then((function(){return t(f())}))}}},P=Object(b.b)((function(e){return{products:E(e)}}),C)((function(e){var t=e.products,a=e.removeProduct,r=e.getProductsList,l=Object(n.useState)(!1),u=Object(o.a)(l,2),i=u[0],m=u[1];return Object(n.useEffect)((function(){r()}),[]),c.a.createElement("div",{className:"conteiner"},c.a.createElement("button",{onClick:function(){return m(!0)}},"Add"),i&&c.a.createElement(S,{closeModal:function(){m(!1)}}),c.a.createElement(k,{removeProducts:a,products:t}))})),g=a(30),w=a(69),L={productsList:[]},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCTS_LIST_RECIVED":return Object(m.a)(Object(m.a)({},e),{},{productsList:t.payload.productsList});default:return e}},F=Object(g.c)({products:R}),T=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||g.d,D=Object(g.e)(F,T(Object(g.a)(w.a)));a(81);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b.a,{store:D},c.a.createElement(P,null))),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.ee2bfa20.chunk.js.map